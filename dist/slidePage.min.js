"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t,t.document)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(t,t.document):t.slidePage=e(t,t.document)}("undefined"!=typeof window?window:void 0,function(r,u){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});r.addEventListener("test",null,e)}catch(t){}var n=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=r.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null},s=function(t,e){for(var i in e)t[i]=e[i];return t},o=function(t,e){var i=t.nodeName===e.nodeName,n=t.nodeType===e.nodeType,s=t.innerHTML===e.innerHTML;return t.className.replace(/ transition/g,"")===e.className.replace(/ transition/g,"")&&i&&n&&s},a=function(t){if(t instanceof NodeList||t instanceof HTMLCollection&&0<t.length){for(var e=0,i=0,n=t.length;i<n;i++)t[i]instanceof Element&&e++;return e===n}return t instanceof Element},i={},l={wheelFunc:function(t){(t=t||r.event).wheelDeltaY<0||t.wheelDelta<0||0<t.detail?this.canSlide&&this.canNext&&this.slideNext():(0<t.wheelDeltaY||0<t.wheelDelta||t.detail<0)&&this.canSlide&&this.canPrev&&this.slidePrev()},touchStart:function(t){i.startpoint=t.targetTouches[0].clientY},touchMove:function(t){var e=t.targetTouches[0].clientY-i.startpoint;!this.canPrev&&5<e&&(this.isScroll=!0),!this.canNext&&e<-5&&(this.isScroll=!0),!this.isScroll&&t.preventDefault(),i.endpoint=t.targetTouches[0].clientY},touchEnd:function(t){if(0===i.endpoint)return!1;i.endpoint-i.startpoint<-60?this.canSlide&&this.canNext&&this.slideNext():60<i.endpoint-i.startpoint&&this.canSlide&&this.canPrev&&this.slidePrev(),i.startpoint=0,i.endpoint=0},transitionEnd:function(t){t.target.isEqualNode(this.items[this.page-1])&&("next"==this.direction?(this.opt.after(this.page-1,this.direction,this.page),this.opt.refresh&&y.resetAnimation.call(this,this.page-2)):"prev"==this.direction&&(this.opt.after(this.page+1,this.direction,this.page),this.opt.refresh&&y.resetAnimation.call(this,this.page)),this.canSlide=!0)}},y={slideScroll:function(e){var s=this.items[e].children[0].offsetHeight,t=r.innerHeight,i=function(t){var e=r.innerHeight,i=s<=this.items[t].scrollTop+e,n=0==this.items[t].scrollTop;this.canPrev=n&&!i,this.canNext=i&&!n,this.isScroll=!(i||n)}.bind(this);20<s-t?(this.items[e].children[0].children[0].focus(),i(e),"next"==this.direction?this.items[e].scrollTop=0:"prev"==this.direction&&(this.items[e].scrollTop=s-t),this.items[e].addEventListener("scroll",function(t){i(e)})):(this.canPrev=!0,this.canNext=!0,this.isScroll=!1)},resetAnimation:function(t){if(this.opt.useAnimation&&this.opt.refresh){if(!this.items[t])return!1;var e=this.items[t].querySelectorAll(".step"),i=this.items[t].querySelectorAll(".lazy"),n=!0,s=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.style.display="none"}}catch(t){s=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw r}}var l=!0,h=!1,c=void 0;try{for(var d,u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){d.value.style.display="none"}}catch(t){h=!0,c=t}finally{try{!l&&u.return&&u.return()}finally{if(h)throw c}}}},runAnimation:function(t,e){if(this.opt.useAnimation){var i=this.items[t].querySelectorAll(e||".step"),n=!0,s=!1,r=void 0;try{for(var o,a=i[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)var l=o.value,h=l.getAttribute("data-delay")||100,c=setTimeout(function(){l.style.display="",clearTimeout(c)},h)}catch(t){s=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw r}}}},initAnimation:function(t,e){if(this.opt.useAnimation){var i=this.container.querySelectorAll(".step"),n=this.container.querySelectorAll(".lazy"),s=!0,r=!1,o=void 0;try{for(var a,l=i[Symbol.iterator]();!(s=(a=l.next()).done);s=!0){a.value.style.display="none"}}catch(t){r=!0,o=t}finally{try{!s&&l.return&&l.return()}finally{if(r)throw o}}var h=!0,c=!1,d=void 0;try{for(var u,p=n[Symbol.iterator]();!(h=(u=p.next()).done);h=!0){u.value.style.display="none"}}catch(t){c=!0,d=t}finally{try{!h&&p.return&&p.return()}finally{if(c)throw d}}y.runAnimation.call(this,e)}for(var f,v=0;f=this.items[v];v++)v===e?f.style.transform="translate3d(0, 0, 0)":v<e?f.style.transform="translate3d(0, -100%, 0)":e<v&&(f.style.transform="translate3d(0, 100%, 0)"),function(t){var e=setTimeout(function(){t.classList.add("transition"),clearTimeout(e)})}(f)},initEvent:function(){this.opt.useWheel&&(u.addEventListener("DOMMouseScroll",this.eventHandler.wheelFunc,!!t&&{passive:!0}),u.addEventListener("mousewheel",this.eventHandler.wheelFunc,!!t&&{passive:!0})),this.opt.useSwipe&&(i={startpoint:0,endpoint:0},this.container.addEventListener("touchstart",this.eventHandler.touchStart,!!t&&{passive:!0}),this.container.addEventListener("touchmove",this.eventHandler.touchMove),this.container.addEventListener("touchend",this.eventHandler.touchEnd,!!t&&{passive:!0})),this.container.addEventListener("transitionend",this.eventHandler.transitionEnd)}},h=function(t){var e={page:1*n("page")||1,slidePages:".slide-page",slideContainer:".slide-container",after:function(){},before:function(){},refresh:!1,useWheel:!0,useSwipe:!0,useAnimation:!0};for(var i in this.canSlide=!0,this.canNext=!0,this.canPrev=!0,this.isScroll=!1,this.opt=s(e,t),this.page=this.opt.page,this.container=a(this.opt.slideContainer)?this.opt.slideContainer:u.querySelector(this.opt.slideContainer),this.items=a(this.opt.slidePages)?this.opt.slidePages:u.querySelectorAll(this.opt.slidePages),this.count=this.items.length,this.direction="",this.eventHandler={},l)this.eventHandler[i]=l[i].bind(this);y.initEvent.call(this),y.slideScroll.call(this,this.page-1),y.initAnimation.call(this,this.items,this.page-1),this.slideTo(this.page)};return h.prototype.slideNext=function(t){if(this.count<=this.page)return!1;this.direction="next",y.slideScroll.call(this,this.page),this.items[this.page-1].style.transform="translate3d(0, -100%, 0)",this.items[this.page].style.transform="translate3d(0, 0, 0)",this.page++,this.opt.before(this.page-1,this.direction,this.page),t||(this.canSlide=!1,y.runAnimation.call(this,this.page-1))},h.prototype.slidePrev=function(t){if(this.page<=1)return!1;this.direction="prev",y.slideScroll.call(this,this.page-2),this.items[this.page-2].style.transform="translate3d(0, 0, 0)",this.items[this.page-1].style.transform="translate3d(0, 100%, 0)",this.page--,this.opt.before(this.page+1,this.direction,this.page),t||(this.canSlide=!1,y.runAnimation.call(this,this.page-1))},h.prototype.slideTo=function(t){if(1<=t&&t<=this.count){if(t==this.page)return!1;if(t>this.page){for(var e=this.page+1;e<t;e++)this.slideNext("optimize");this.slideNext()}else if(t<this.page){for(e=this.page-1;t<e;e--)this.slidePrev("optimize");this.slidePrev()}}},h.prototype.slideFire=function(t){var e=t?t-1:this.page-1;y.runAnimation.call(this,e,".lazy")},h.prototype.destroy=function(){if(this.opt.useAnimation){this.items.length;var t=this.container.querySelectorAll(".step"),e=this.container.querySelectorAll(".lazy"),i=!0,n=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){r.value.style.display=""}}catch(t){n=!0,s=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw s}}var a=!0,l=!1,h=void 0;try{for(var c,d=e[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){c.value.style.display=""}}catch(t){l=!0,h=t}finally{try{!a&&d.return&&d.return()}finally{if(l)throw h}}y.runAnimation.call(this,0)}if(this.opt.useWheel&&(u.removeEventListener("DOMMouseScroll",this.eventHandler.wheelFunc),u.removeEventListener("mousewheel",this.eventHandler.wheelFunc),this.items[this.page-1].style.transform="translate3d(0, 0, 0)"),this.opt.useSwipe){this.container.removeEventListener("touchstart",this.eventHandler.touchStart),this.container.removeEventListener("touchmove",this.eventHandler.touchMove),this.container.removeEventListener("touchend",this.eventHandler.touchEnd)}this.container.removeEventListener("transitionend",this.eventHandler.transitionEnd)},h.prototype.update=function(t){this.canSlide=!0,this.canNext=!0,this.canPrev=!0;for(var e=a(t)?t:u.querySelectorAll(this.opt.slidePages),i=0,n=e.length;i<n;i++){if(this.items[this.page-1]&&o(this.items[this.page-1],e[i])){this.page=i+1;break}i===n-1&&(this.page=1)}this.items=e,this.count=this.items.length,this.slideTo(this.page),y.initAnimation.call(this,this.items,this.page-1)},h});