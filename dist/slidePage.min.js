!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],function(){return e(t,t.document)}):"object"==typeof exports?module.exports=e(t,t.document):t.slidePage=e(t,t.document)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){i=!0}});t.addEventListener("test",null,n)}catch(t){}var s=function(e){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=t.location.search.substr(1).match(i);return null!=n?unescape(n[2]):null},r=function(t,e){for(var i in e)t[i]=e[i];return t},o=function(t,e){var i=t.nodeName===e.nodeName,n=t.nodeType===e.nodeType,s=t.innerHTML===e.innerHTML;return t.className.replace(/ transition/g,"")===e.className.replace(/ transition/g,"")&&i&&n&&s},a={},h={wheelFunc:function(e){(e=e||t.event).wheelDeltaY<0||e.wheelDelta<0||e.detail>0?this.canSlide&&this.canNext&&this.slideNext():(e.wheelDeltaY>0||e.wheelDelta>0||e.detail<0)&&this.canSlide&&this.canPrev&&this.slidePrev()},touchStart:function(t){a.startpoint=t.targetTouches[0].clientY},touchMove:function(t){var e=t.targetTouches[0].clientY-a.startpoint;!this.canPrev&&e>5&&(this.isScroll=!0),!this.canNext&&e<-5&&(this.isScroll=!0),!this.isScroll&&t.preventDefault(),a.endpoint=t.targetTouches[0].clientY},touchEnd:function(t){if(0===a.endpoint)return!1;a.endpoint-a.startpoint<-60?this.canSlide&&this.canNext&&this.slideNext():a.endpoint-a.startpoint>60&&this.canSlide&&this.canPrev&&this.slidePrev(),a.startpoint=0,a.endpoint=0},transitionEnd:function(t){t.target.isEqualNode(this.items[this.page-1])&&("next"==this.direction?(this.opt.after(this.page-1,this.direction,this.page),this.opt.refresh&&l.resetAnimation.call(this,this.page-2)):"prev"==this.direction&&(this.opt.after(this.page+1,this.direction,this.page),this.opt.refresh&&l.resetAnimation.call(this,this.page)),this.canSlide=!0)}},l={slideScroll:function(e){var i=this.items[e].children[0].offsetHeight,n=t.innerHeight,s=function(e){var n=t.innerHeight,s=i<=this.items[e].scrollTop+n,r=0==this.items[e].scrollTop;this.canPrev=r&&!s,this.canNext=s&&!r,this.isScroll=!(s||r)}.bind(this);i-n>20?(this.items[e].children[0].children[0].focus(),s(e),"next"==this.direction?this.items[e].scrollTop=0:"prev"==this.direction&&(this.items[e].scrollTop=i-n),this.items[e].addEventListener("scroll",function(t){s(e)})):(this.canPrev=!0,this.canNext=!0,this.isScroll=!1)},resetAnimation:function(t){if(this.opt.useAnimation&&this.opt.refresh){if(!this.items[t])return!1;var e=this.items[t].querySelectorAll(".step"),i=this.items[t].querySelectorAll(".lazy");e.length>0&&e.forEach(function(t){t.style.display="none"}),i.length>0&&i.forEach(function(t){t.style.display="none"})}},runAnimation:function(t,e){if(this.opt.useAnimation){this.items[t].querySelectorAll(e||".step").forEach(function(t){var e=t.getAttribute("data-delay")||100,i=setTimeout(function(){t.style.display="",clearTimeout(i)},e)})}},initAnimation:function(t,e){if(this.opt.useAnimation){var i=this.container.querySelectorAll(".step"),n=this.container.querySelectorAll(".lazy");i.length>0&&i.forEach(function(t){t.style.display="none"}),n.length>0&&n.forEach(function(t){t.style.display="none"}),l.runAnimation.call(this,e),this.items.forEach(function(t,i){i===e?t.style.transform="translate3d(0, 0, 0)":i<e?t.style.transform="translate3d(0, -100%, 0)":i>e&&(t.style.transform="translate3d(0, 100%, 0)");var n=setTimeout(function(){t.classList.add("transition"),clearTimeout(n)})})}},initEvent:function(){this.opt.useWheel&&(e.addEventListener("DOMMouseScroll",this.eventHandler.wheelFunc,!!i&&{passive:!0}),e.addEventListener("mousewheel",this.eventHandler.wheelFunc,!!i&&{passive:!0})),this.opt.useSwipe&&(a={startpoint:0,endpoint:0},this.container.addEventListener("touchstart",this.eventHandler.touchStart,!!i&&{passive:!0}),this.container.addEventListener("touchmove",this.eventHandler.touchMove),this.container.addEventListener("touchend",this.eventHandler.touchEnd,!!i&&{passive:!0})),this.container.addEventListener("transitionend",this.eventHandler.transitionEnd)}},c=function(t){var i={page:1*s("page")||1,slideItem:".slide-page",slideContainer:".slide-container",after:function(){},before:function(){},speed:!1,refresh:!1,useWheel:!0,useSwipe:!0,useAnimation:!0};this.canSlide=!0,this.canNext=!0,this.canPrev=!0,this.isScroll=!1,this.opt=r(i,t),this.page=this.opt.page,this.container=e.querySelector(this.opt.slideContainer),this.items=e.querySelectorAll(this.opt.slideItem),this.count=this.items.length,this.direction="",this.eventHandler={};for(var n in h)this.eventHandler[n]=h[n].bind(this);l.initEvent.call(this),l.slideScroll.call(this,this.page-1),l.initAnimation.call(this,this.items,this.page-1),this.slideTo(this.page)};return c.prototype.slideNext=function(t){if(this.count<=this.page)return!1;this.direction="next",l.slideScroll.call(this,this.page),this.items[this.page-1].style.transform="translate3d(0, -100%, 0)",this.items[this.page].style.transform="translate3d(0, 0, 0)",this.page++,this.opt.before(this.page-1,this.direction,this.page),t||(this.canSlide=!1,l.runAnimation.call(this,this.page-1))},c.prototype.slidePrev=function(t){if(1>=this.page)return!1;this.direction="prev",l.slideScroll.call(this,this.page-2),this.items[this.page-2].style.transform="translate3d(0, 0, 0)",this.items[this.page-1].style.transform="translate3d(0, 100%, 0)",this.page--,this.opt.before(this.page+1,this.direction,this.page),t||(this.canSlide=!1,l.runAnimation.call(this,this.page-1))},c.prototype.slideTo=function(t){if(t>=1&&t<=this.count){if(t==this.page)return!1;if(t>this.page){for(var e=this.page+1;e<t;e++)this.slideNext("optimize");this.slideNext()}else if(t<this.page){for(e=this.page-1;e>t;e--)this.slidePrev("optimize");this.slidePrev()}}},c.prototype.slideFire=function(t){var e=t?t-1:this.page-1;l.runAnimation.call(this,e,".lazy")},c.prototype.destroy=function(){if(this.opt.useAnimation){this.items.length;var t=this.container.querySelectorAll(".step"),i=this.container.querySelectorAll(".lazy");t.length>0&&t.forEach(function(t){t.style.display=""}),i.length>0&&i.forEach(function(t){t.style.display=""}),l.runAnimation.call(this,0)}if(this.opt.useWheel&&(e.removeEventListener("DOMMouseScroll",this.eventHandler.wheelFunc),e.removeEventListener("mousewheel",this.eventHandler.wheelFunc),this.items[this.page-1].style.transform="translate3d(0, 0, 0)"),this.opt.useSwipe){this.container.removeEventListener("touchstart",this.eventHandler.touchStart),this.container.removeEventListener("touchmove",this.eventHandler.touchMove),this.container.removeEventListener("touchend",this.eventHandler.touchEnd)}this.container.removeEventListener("transitionend",this.eventHandler.transitionEnd)},c.prototype.update=function(){this.canSlide=!0,this.canNext=!0,this.canPrev=!0;for(var t=e.querySelectorAll(this.opt.slideItem),i=0,n=t.length;i<n;i++){if(o(t[i],this.items[this.page-1])){this.page=i+1;break}i===n-1&&(this.page=1)}this.items=t,this.count=this.items.length,this.slideTo(this.page),l.initAnimation.call(this,this.items,this.page-1)},c});