(function(e){var f=location.search?j(location.search).page:1;var a={index:f,pageContainer:".item",after:function(){},before:function(){},speed:false,refresh:true,pagination:true,useWheel:true,useKeyboard:true,useArrow:true,useAnimation:true,useMusic:{autoPlay:true,loopPlay:true,src:"http://info.lipten.net/projects/slidePage/Summer.mp3"},};var d=true;var o;var n=true;var i=a.index-1;var q=e(a.pageContainer).css("transition-duration").replace("s","")*1000;var m=e(a.pageContainer).length;window.slidePage={init:function(s){e.extend(a,s);k(a);b(a)},index:function(s){if(s>0){s=parseInt(s)-1;if(s>i){for(var t=i;t<s;t++){p(e(a.pageContainer).eq(t))}}else{if(s<i){for(var t=i;t>=s;t--){h(e(a.pageContainer).eq(t+1))}}}i=s;c()}return i},next:function(){if(n&&i<m-1){p(e(a.pageContainer).eq(i++));n=false}},prev:function(){if(n&&i>0){h(e(a.pageContainer).eq(i--));n=false}},};var l={nextSlide:function(s){s.css("-webkit-transform","translate3d(0,-100%,0)");s.next().css("-webkit-transform","translate3d(0,0,0)")},prevSlide:function(s){s.prev().css("-webkit-transform","scale(1)");s.css("-webkit-transform","translate3d(0,100%,0)")},showSlide:function(s){s.css("-webkit-transform","scale(1)");s.next().css("-webkit-transform","translate3d(0,100%,0)")}};function g(){var s=navigator.userAgent;var w=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];var t=true;for(var u=0;u<w.length;u++){if(s.indexOf(w[u])>0){t=false;break}}return t}function c(){if(a.refresh&&n&&a.useAnimation){n=="next"?e(a.pageContainer).eq(i).find(".step").addClass("hide"):e(a.pageContainer).eq(i).find(".step").addClass("hide")}if(i+1==m){e(a.pageContainer).parent().find(".arrow").addClass("hide")}else{e(a.pageContainer).parent().find(".arrow").removeClass("hide")}e("#pagination").find("a").removeClass("active").eq(i).addClass("active")}function j(v){var u={};if(/\?/.test(v)){var t=v.substring(v.indexOf("?")+1);var y=t.split("&");for(var w=0,s=y.length;w<s;w++){var z=y[w];var x=z.split("=");u[x[0]]=x[1]}return u}}function p(s){if(s.next().length){currentItem=s.next();r(s.next(),"next");l.nextSlide(s)}else{l.showSlide(s)}a.before(s.index()+1);keyindex=e(a.pageContainer).index(s);c()}function h(s){if(s.prev().length){currentItem=s.prev();r(s.prev(),"prev");l.prevSlide(s);s.prev().prev().css("-webkit-transform","translate3d(0px, -100%, 0px)")}else{l.showSlide(s)}a.before(s.index()+1);keyindex=e(a.pageContainer).index(s);c()}function k(w){if(!!w.speed){e(w.pageContainer).css({"transition-duration":w.speed+"ms","-webkit-transition-duration":w.speed+"ms"})}if(!!w.pagination){var u="";for(var v=0;v<m;v++){u+="<a></a>"}e("body").append('<nav class="pagination" id="pagination"><div class="prev-page" id="prev-page">&Lambda;</div>'+u+'<div class="next-page" id="next-page">V</div></nav>');e("#pagination").css("margin-top",-e("#pagination").height()/2-40+"px");c()}currentItem=e(w.pageContainer).eq(w.index-1);o=currentItem.prev();currentItem.css("-webkit-transform","translate3d(0px, 0px, 0px)");o.css("-webkit-transform","translate3d(0px, -100%, 0px)");if(!!w.useAnimation){var t=e(w.pageContainer);t.find(".step").addClass("hide");r(t.eq(w.index-1))}if(!!w.useArrow){e("#slidePage-container").append('<span class="arrow"></span>')}if(!!w.useMusic){var x=w.useMusic.autoPlay?'autoplay="autoplay"':"";var s=w.useMusic.loopPlay?'loop="loop"':"";var y=w.useMusic.src;e("#slidePage-container").append('<span class="music play" id="music"><audio id="audio" src='+y+" "+x+" "+s+"></audio></span>")}}function r(t,u){d=true;setTimeout(function(){n=u||n},a.speed||q);var s=e(t).find(".step");s.each(function(v,w){var x=e(w).attr("data-delay")||100;setTimeout(function(){e(w).removeClass("hide")},x)})}function b(s){var t=g()?"click":"tap";if(!!s.useWheel){document.onmousewheel=function(u){if(u.wheelDeltaY<0){slidePage.next()}else{if(u.wheelDeltaY>0){slidePage.prev()}}}}if(!!s.useKeyboard){document.onkeydown=function(u){if(u.keyCode=="40"&&n&&i<m-1){slidePage.next()}else{if(u.keyCode=="38"&&n&&i>0){slidePage.prev()}}}}e("#next-page").on(t,function(){slidePage.next()});e("#prev-page").on(t,function(){slidePage.prev()});e("#pagination a").on(t,function(){slidePage.index(e("#pagination a").index(e(this))+1)});e("#music").on(t,function(){e(this).toggleClass("play");var u=document.getElementById("audio");if(u.paused){u.play()}else{u.pause()}});e("#slidePage-container").on("touchmove",function(u){u.preventDefault()});e(s.pageContainer).on({swipeUp:function(){slidePage.next()},swipeDown:function(){slidePage.prev()}});e(s.pageContainer).on("transitionend webkitTransitionEnd",function(u){if(d){s.after(e(u.target).index()+1);d=false}})}})($);(function(f){var g={},a,k,c,i,d=750,l;function j(p,o,r,q){return Math.abs(p-o)>=Math.abs(r-q)?(p-o>0?"Left":"Right"):(r-q>0?"Up":"Down")}function n(){i=null;if(g.last){g.el.trigger("longTap");g={}}}function b(){if(i){clearTimeout(i)}i=null}function e(){if(a){clearTimeout(a)}if(k){clearTimeout(k)}if(c){clearTimeout(c)}if(i){clearTimeout(i)}a=k=c=i=null;g={}}function m(o){return(o.pointerType=="touch"||o.pointerType==o.MSPOINTER_TYPE_TOUCH)&&o.isPrimary}function h(p,o){return(p.type=="pointer"+o||p.type.toLowerCase()=="mspointer"+o)}f(document).ready(function(){var p,t,q=0,r=0,s,o;if("MSGesture" in window){l=new MSGesture();l.target=document.body}f(document).bind("MSGestureEnd",function(v){var u=v.velocityX>1?"Right":v.velocityX<-1?"Left":v.velocityY>1?"Down":v.velocityY<-1?"Up":null;if(u){g.el.trigger("swipe");g.el.trigger("swipe"+u)}}).on("touchstart MSPointerDown pointerdown",function(u){u.Touches=u.originalEvent?u.originalEvent.changedTouches:u.touches;if((o=h(u,"down"))&&!m(u)){return}s=o?u:u.Touches[0];if(u.Touches&&u.Touches.length===1&&g.x2){g.x2=undefined;g.y2=undefined}p=Date.now();t=p-(g.last||p);g.el=f("tagName" in s.target?s.target:s.target.parentNode);a&&clearTimeout(a);g.x1=s.pageX;g.y1=s.pageY;if(t>0&&t<=250){g.isDoubleTap=true}g.last=p;i=setTimeout(n,d);if(l&&o){l.addPointer(u.pointerId)}}).on("touchmove MSPointerMove pointermove",function(u){u.Touches=u.originalEvent?u.originalEvent.changedTouches:u.touches;if((o=h(u,"move"))&&!m(u)){return}s=o?u:u.Touches[0];b();g.x2=s.pageX;g.y2=s.pageY;q+=Math.abs(g.x1-g.x2);r+=Math.abs(g.y1-g.y2)}).on("touchend MSPointerUp pointerup",function(u){if((o=h(u,"up"))&&!m(u)){return}b();if((g.x2&&Math.abs(g.x1-g.x2)>30)||(g.y2&&Math.abs(g.y1-g.y2)>30)){c=setTimeout(function(){g.el.trigger("swipe");g.el.trigger("swipe"+(j(g.x1,g.x2,g.y1,g.y2)));g={}},0)}else{if("last" in g){if(q<30&&r<30){k=setTimeout(function(){var v=f.Event("tap");v.cancelTouch=e;g.el.trigger(v);if(g.isDoubleTap){if(g.el){g.el.trigger("doubleTap")}g={}}else{a=setTimeout(function(){a=null;if(g.el){g.el.trigger("singleTap")}g={}},250)}},0)}else{g={}}}}q=r=0}).on("touchcancel MSPointerCancel pointercancel",e);f(window).on("scroll",e)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(o){f.fn[o]=function(p){return this.on(o,p)}})})($);